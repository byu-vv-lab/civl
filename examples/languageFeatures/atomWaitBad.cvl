#include <civlc.h>
void foo(){
	void koo(){
		int o = 0;
		o++;
	}
	
	$proc p = $spawn koo();
	// undesired wait blocked state in $atom block, an exception will be thrown
	$wait p;
}

void main(){

	$atom{
		foo();
	}
}
